<?xml version="1.0" encoding="UTF-8" ?>

<!--
   See the rhq-plugin.xsd file for detailed documentatoin on the schema. The notes in this file are to
   facilitate using this file as a base plugin descriptor. 
-->

<!--
   CHANGE: The name (and optional displayName) should be changed to reflect the plugin being developed. Keep in mind
           the value for name must be unique across all other plugins that are deployed.

           The package attribute should be changed to reflect the package in which all of the component classes
           are built.
-->
<plugin name="BlacktiePlugin"
        displayName="Blacktie Plugin"
        version="1.0"
        package="org.rhq.plugins.blacktie"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xmlns="urn:xmlns:rhq-plugin"
        xmlns:c="urn:xmlns:rhq-configuration">


   <!--
      CHANGE: The following is a sample server resource type. This entry is here to serve as a model and should
              be removed prior to deploying the plugin. Multiple resource types (either server or service) may be
              defined at this level.
   -->
   <server name="Blactkie Domain"
           discovery="BlacktiePluginDiscoveryComponent"
           class="DomainComponent"
           description="blacktie domain">

      <!--       
         CHANGE: Categories are optional; this entire section may be removed if there is no need to further group
                 related child resources. Categories defined at this level can carry metadata on the category itself,
                 such as a display name and description.
      -->

	  <service name="Server"
		  discovery="ServerDiscoveryComponent"
		  class="ServerComponent"
		  description="blacktie server">
		  <operation name="shutdown" displayName="shutdown" description="Shutdown instance for the specified id">
			  <parameters>
				  <c:simple-property required="true" name="id" displayName="id" description="server id"/>
			  </parameters>
			  <results>
				  <c:notes>Shutdown return message</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
		  </operation>

		  <operation name="listServiceStatus" displayName="listServiceStatus" description="list services status">
			  <parameters>
				  <c:simple-property required="true" name="id" displayName="id" description="server id"/>
			  </parameters>
			  <results>
				  <c:notes>Services status</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
		  </operation>

		  <operation name="advertise" displayName="advertise" description="advertise service">
			  <parameters>
				  <c:simple-property required="true" name="id" displayName="id" description="server id"/>
				  <c:simple-property required="true" name="service" displayName="service" description="service"/>
			  </parameters>
			  <results>
				  <c:notes>Services status</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
		  </operation>

		  <operation name="unadvertise" displayName="unadvertise" description="unadvertise service">
			  <parameters>
				  <c:simple-property required="true" name="id" displayName="id" description="server id"/>
				  <c:simple-property required="true" name="service" displayName="service" description="service"/>
			  </parameters>
			  <results>
				  <c:notes>Services status</c:notes>
				  <c:simple-property name="operationResult" type="longString"/>
			  </results>
		  </operation>

		  <metric property="instanceCount" measurementType="dynamic" displayType="summary" displayName="server instances"
			  defaultOn="true" defaultInterval="60000" dataType="measurement" description="The number of running instances of server"/>

	  </service>
   </server>
</plugin>
