#
# JBoss, Home of Professional Open Source
# Copyright 2009, Red Hat, Inc., and others contributors as indicated
# by the @authors tag. All rights reserved.
# See the copyright.txt in the distribution for a
# full listing of individual contributors.
# This copyrighted material is made available to anyone wishing to use,
# modify, copy, or redistribute it subject to the terms and conditions
# of the GNU Lesser General Public License, v. 2.1.
# This program is distributed in the hope that it will be useful, but WITHOUT A
# WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
# PARTICULAR PURPOSE.  See the GNU Lesser General Public License for more details.
# You should have received a copy of the GNU Lesser General Public License,
# v.2.1 along with this distribution; if not, write to the Free Software
# Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
# MA  02110-1301, USA.
#

# This example needs the header txClient.h and the needs to link against the various blacktie libraries.
# It uses Berkeley dB (http://www.oracle.com/technology/documentation/berkeley-db/db/index.html) for the Resource Manager
# - I built and installed my copy of the library in /usr/local/BerkeleyDB.4.7/lib/libdb
# The file Environment.xml needs to reference the location of this library so if you install it elsewhere remember
# to update the <XA_LIB_NAME> tag. (Similarly on a win32 build the library name needs to point to the correct dll).
#
# For a development build use:
#
# -I ../../../target/cxx/runtime/include for the header, and
# -L../../../target/cxx/runtime/lib for the libraries
# export LD_LIBRARY_PATH=../../../target/cxx/runtime/lib
#
# For a binary release use:
#
# -I <Blacktie install dir>/include for the header, and
# -L<Blacktie install dir>/libTao	- this directory contains all the dependent Blacktie libraries
# export LD_LIBRARY_PATH=<Blacktie install dir>/libTao
#
# if the test is successful the last thing printed by the test is SUCCESS otherwise FAIL is printed.
#
# If you decide to get transactional support working with other resource managers we'd be deligted to add it to the examples.

gcc -DLINUX -D_GNU_SOURCE -D_REENTRANT -g -lm -o xatest xatest.c -fPIC -DPIC  -lpthread  -Wl,--rpath -Wl,/usr/local/BerkeleyDB.4.7/lib -L/usr/local/BerkeleyDB.4.7/lib/libdb -ldb -I ../../../target/cxx/runtime/include -L../../../target/cxx/runtime/lib -lACE -lstomp -lTAO_AnyTypeCode -lTAO_IORInterceptor -lTAO -lapr-1 -latmibroker-corba -lTAO_CodecFactory -lTAO_ObjRefTemplate -lTAO_Valuetype -latmibroker-core -latmibroker-idl -lTAO_CosNaming -lTAO_PI_Server -lxerces-c-3.0 -latmibroker-stomp -lxerces-c -latmibroker-tx -lTAO_IDL_BE -lTAO_PI -lexpat -llog4cxx -lTAO_IDL_FE -lTAO_PortableServer

export LD_LIBRARY_PATH=../../../target/cxx/runtime/lib

#./xatest
